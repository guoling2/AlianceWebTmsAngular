<!--<div style="height: 150px;">-->
<!--343242342342-->
<!--</div>-->

<!--<perfect-scrollbar>-->


<!--</perfect-scrollbar>-->
<div class="contentbox">
  <div class="contentit-l">
    <div><i class="fas fa-compass"></i> 当前位置：<b>订单录入</b></div>
  </div>
  <div class="contenttex-r"></div>
</div>
<div style="width:100%;height:auto;color:#666">
  <form [formGroup]="saveform">
    <div fxLayout="row" fxLayoutAlign="space-around end" >
      <div fxFlex="1 6 calc(15em + 20px)">
        <mat-card class="margin_10">
          <mat-card-title class="cardborder">
            <mat-icon fontSet="fontawesome" fontIcon="fa-file-alt" class="fontacommon_18"></mat-icon>
            <b class="mat_tit_b">运单基础信息</b>
          </mat-card-title>
          <mat-card-content class="margin_t_10">
            <span class="margin_dis">物流跟踪号：<ejs-textbox formControlName="TrackOrderNumber" placeholder='系统生成' disabled="disabled"></ejs-textbox></span>
            <span class="margin_dis">客户单号：<ejs-textbox formControlName="CustomerOrderId" placeholder='客户自有单据号码'></ejs-textbox></span>
            <span class="margin_dis"><ejs-checkbox label="上门提货" formControlName="IfCargoFromOrigin"></ejs-checkbox>
          <span style="margin:0 10px;">

<!--               这个不需要了-->
              <ejs-checkbox label="提货返仓" style="display: none" indeterminate="true" formControlName="TihuoReturn"></ejs-checkbox>


             <ejs-checkbox  style="display: none" label="免费提货" formControlName="FreeTihuo"></ejs-checkbox>
          </span>
          <span style="margin:0 10px 0 0;">
            <ejs-radiobutton label="轻货" formControlName="OrderItemCaclProperty" value="PH"></ejs-radiobutton></span>
          <ejs-radiobutton label="重货"  formControlName="OrderItemCaclProperty" value="ZH"></ejs-radiobutton></span>
            <span class="margin_dis">预约提货:<ejs-datetimepicker format='yyyy-MM-dd HH:mm' formControlName="AskTihuoTime"></ejs-datetimepicker></span>
            <span class="margin_dis">业务员编号:<ejs-textbox formControlName="BuinessManCode"></ejs-textbox></span>
            <div style="margin-top:10px;overflow-y:auto;overflow-x: hidden">
              <div style="float:left;width:73%">佣金:<ejs-numerictextbox step='1' formControlName="BuinessMancommission"></ejs-numerictextbox></div>
              <div style="float:right;width:24%;"><ejs-checkbox label="已返" formControlName="BuinessMancommissionIsReturn" style="margin-top:20px" indeterminate="true"></ejs-checkbox></div>
            </div>

          </mat-card-content>
        </mat-card>
      </div>
      <div fxFlex="5 6 calc(15em + 20px)">
        <mat-card style="margin:10px 10px 10px 0">
          <mat-card-title class="cardborder">
            <mat-icon fontSet="fontawesome" fontIcon="fa-user " class="fontacommon_18"></mat-icon>
            <b class="mat_tit_b">发货客户信息</b>
          </mat-card-title>
          <mat-card-content>
            <div fxLayout="row" class="margin_t_10">
              <div fxFlex="1 3">客户手机：&nbsp;<ejs-textbox formControlName="Origintel"></ejs-textbox></div>
              <div fxFlex="1 3" class="margin_015">客户名称：&nbsp;<ejs-textbox formControlName="Origincustomname" disabled="true"></ejs-textbox></div>
              <div fxFlex="1 3">
                <div style="float: left;width:80%">客户编码：<ejs-textbox disabled="true" formControlName="OrigincustomId"></ejs-textbox></div>
                <div style="float: right;padding-top:15px">

                  <button ejs-button cssClass="e-small" (click)="choecustomer($event,1,'50em','50em')"><i class="fas fa-search"></i></button>
                </div>
              </div>
            </div>
            <div fxLayout="row" class="margin_t_10">
              <div fxFlex="1 3">联系人：&nbsp;<ejs-textbox formControlName="OrigincustomLinkman"></ejs-textbox></div>
              <div fxFlex="1 3" class="margin_015">提货地址：<ejs-autocomplete
                                                                          [dataSource]='group'
                                                                          [fields]='remoteFields'
                                                                          allowCustom=false,
                                                                          formControlName="OriginArea"
                                                                          placeholder='输入区县名称'>
              </ejs-autocomplete></div>
              <div fxFlex="1 3" style="margin-top:18px"><ejs-textbox formControlName="OriginAddress" placeholder='详细地址，不需要输入前面市部分'></ejs-textbox></div>
            </div>
          </mat-card-content>
        </mat-card>
        <mat-card style="margin:20px 10px 10px 0">
          <mat-card-title class="cardborder">
            <mat-icon fontSet="fontawesome" fontIcon="fa-user " class="fontacommon_18"></mat-icon>
            <b class="mat_tit_b">收货客户信息</b>
          </mat-card-title>
          <mat-card-content>
            <div fxLayout="row" class="margin_t_10">
              <div fxFlex="1 3">客户手机：&nbsp;<ejs-textbox formControlName="Desttel"></ejs-textbox></div>
              <div fxFlex="1 3" class="margin_015">客户名称：&nbsp;<ejs-textbox formControlName="Destcustomname" disabled="true"></ejs-textbox></div>
              <div fxFlex="1 3">
                <div style="float: left;width:80%">客户编码：<ejs-textbox disabled="true" formControlName="DestcustomId"></ejs-textbox></div>   <!--收货客户-->
                <div style="float: right;padding-top:15px"><button ejs-button cssClass="e-small" (click)="choecustomer($event,2,'50em','50em')"><i class="fas fa-search"></i></button></div>
              </div>
            </div>
            <div fxLayout="row" class="margin_t_10">
              <div fxFlex="1 3">联系人：&nbsp;<ejs-textbox formControlName="DestcustomLinkman"></ejs-textbox></div>
              <div fxFlex="1 3" class="margin_015">到货地址：
                <ejs-autocomplete
                                  [dataSource]='group'
                                  [fields]='remoteFields'
                                  allowCustom=false,
                                  formControlName="DestArea"
                                  placeholder='输入区县名称'>
                </ejs-autocomplete></div>
              <div fxFlex="1 3" style="margin-top:17px"><ejs-textbox formControlName="DestAddress" placeholder='详细地址，不需要输入前面市部分'></ejs-textbox></div>
            </div>

          </mat-card-content>

        </mat-card>
      </div>
    </div>
    <mat-card class="cardmargin">
      <mat-card-title class="cardborder">
        <mat-icon fontSet="fontawesome" fontIcon="fa-box-open " class="fontacommon"></mat-icon>
        <b class="mat_tit_b">货物信息</b>
      </mat-card-title>
      <mat-card-content>
        <!--      <button ejs-button cssClass="e-info" (click)="additem()" style="display: none">增加品相</button>-->
        <div formArrayName="ShipmentOrderItems">
          <div *ngFor=" let e of this.OrderItems.controls; let i = index " [formGroupName]="i">
            <div fxLayout="row" fxLayoutAlign="space-around end" class="margin_t_10">
              <div fxFlex="1 5"> 货物信息：<ejs-textbox formControlName="Package"></ejs-textbox></div>
              <div fxFlex="1 5" class="margin_015">数量：<ejs-numerictextbox step='1'  min="0" formControlName="PackageCount"></ejs-numerictextbox></div>
              <div fxFlex="1 5">打包类型:<ejs-textbox formControlName="PackingType"></ejs-textbox></div>
              <div fxFlex="1 5" class="margin_015">货物重量（Kg）：<ejs-numerictextbox step='1' formControlName="PackageWeightKg"></ejs-numerictextbox></div>
              <div fxFlex="1 5">货物体积（M3）：<ejs-numerictextbox step='1' min="0" formControlName="PackageVolM"></ejs-numerictextbox></div>
            </div>
            <div fxLayout="row" fxLayoutAlign="space-around end" class="margin_t_10">
              <div fxFlex="1 5">货物尺寸（长）：<ejs-numerictextbox step='1' min="0" formControlName="PackageLength" aria-placeholder=""></ejs-numerictextbox></div>
              <div fxFlex="1 5" class="margin_015">（宽）<ejs-numerictextbox step='1'  min="0"formControlName="PackageWidth"></ejs-numerictextbox></div>
              <div fxFlex="1 5">（高）<ejs-numerictextbox step='1' min="0" formControlName="PackageHigh"></ejs-numerictextbox></div>
            </div>
          </div>
        </div>
        <div class="margin_t_10">对内备注：<ejs-textbox formControlName="InnerMark"></ejs-textbox></div>
      </mat-card-content>
    </mat-card>
    <mat-card class="cardmargin">
      <mat-card-title class="cardborder">
        <mat-icon fontSet="fontawesome" fontIcon="fa-truck" class="fontacommon"></mat-icon>
        <b class="mat_tit_b">物流运输信息</b>
      </mat-card-title>
      <mat-card-content style="overflow-x:hidden">
        <div fxLayout="row" fxLayoutAlign="space-around end" class="margin_t_10">
          <div fxFlex="1 3">交货方式：
            <app--bin-tihuotype  placeholder='选择交货方式' formControlName="Destservice"></app--bin-tihuotype>
          </div>
          <div fxFlex="1 3" class="margin_015">运输方式：
            <app-bin-yunshuxingzhi formControlName="TransportMethod"></app-bin-yunshuxingzhi>
          </div>
          <div fxFlex="1 3">预约送达时限:<ejs-datetimepicker format='yyyy-MM-dd HH:mm'  formControlName="OrderAskLimiteDateTime"></ejs-datetimepicker></div>
        </div>
        <div fxLayout="row" fxLayoutAlign="space-around end" class="margin_t_10">
          <div fxFlex="1 3">发货网点：<app-bin-mylogisticstore  formControlName="BeginLogisticStoreId">loading...</app-bin-mylogisticstore></div>
          <div fxFlex="1 3" class="margin_015">
            落货/自提网点：<app-bin-logisticstoreall  formControlName="EndLogisticStoreId" placeholder="下拉选择网点"></app-bin-logisticstoreall>
            <!--            <div style="float:left;width:78%">自提/送货网点：<app-bin-logisticstoreall placeholder="大车直送不需要选择" formControlName="EndLogisticStoreId"></app-bin-logisticstoreall></div>-->
            <!--            <div style="float:right;width:20%"><ejs-checkbox label="专线直送" formControlName="ToDestCustomerNoRound" style="margin-top:17px"></ejs-checkbox></div>-->
          </div>
          <div fxFlex="1 3">
            <div style="float:left;width:76%">中转方案：<ejs-textbox #planroutetxt disabled="true"  placeholder='直达线路'></ejs-textbox></div>
            <div style="float:right;width:22%;">
              <button ejs-button cssClass="e-success" style="margin-top:17px" [disabled]="!enbelbackuprouteplan"  (click)="caclorderroute('50em','50em')">备选线路</button>
            </div>
          </div>

        </div>
        <div class="margin_t_10">运输备注：<ejs-textbox formControlName="TransportMark"></ejs-textbox></div>
      </mat-card-content>
    </mat-card>
    <mat-card class="cardmargin">
      <mat-card-title class="cardborder">
        <mat-icon fontSet="fontawesome" fontIcon="fa-balance-scale" class="fontacommon"></mat-icon>
        <b class="mat_tit_b">增值业务</b>
      </mat-card-title>
      <mat-card-content>
        <div fxLayout="row" fxLayoutAlign="space-around top">
          <div fxFlex="5 6 calc(15em + 20px)">
            <div fxLayout="row" class="margin_t_10">
              <div fxFlex="1 3">保险声明价值：<ejs-numerictextbox step='1' formControlName="DeclaredValue"></ejs-numerictextbox></div>
              <div fxFlex="1 3" class="margin_015">保价费率：<ejs-numerictextbox></ejs-numerictextbox></div>
              <div fxFlex="1 3">保价费：<ejs-numerictextbox value="0"></ejs-numerictextbox></div>
            </div>
            <div fxLayout="row" class="margin_t_10">
              <div fxFlex="1 3">代收货款 ：<ejs-numerictextbox step='1' formControlName="CollectionOnDeliveryAmount"></ejs-numerictextbox></div>
              <div fxFlex="1 3" class="margin_015">手续费率：<ejs-numerictextbox></ejs-numerictextbox></div>
              <div fxFlex="1 3">手续费：<ejs-numerictextbox value="0"></ejs-numerictextbox></div>
            </div>
            <div fxLayout="row" class="margin_t_10">
              <div fxFlex="1 2">收款账号：<ejs-textbox formControlName="CollectionOnDeliveryBankNumber"></ejs-textbox></div>
              <div fxFlex="1 2" class="margin_015">收款人姓名：<ejs-textbox formControlName="CollectionOnDeliveryBankPeopleName"></ejs-textbox></div>
            </div>
            <div fxLayout="row" class="margin_t_10">
              <div style="float:left;width:78%">发票抬头：
                <ejs-dropdownlist id='games' #sample  [fields]="taxfields"
                                  formControlName="InvoiceTitle" [dataSource]="CustomerTaxModles">

<!--                  <ng-conter #itemTemplate let-data>-->
<!--                    <div>-->
<!--                      <span class=""> {{data.Invoicetitle}} </span> /-->
<!--                      <span class=""> {{data.Taxno}} </span>-->
<!--                    </div>-->
<!--                  </ng-conter>-->
                </ejs-dropdownlist>

              </div>
              <div style="float:right;width:20%">

                <ejs-tooltip #tooltip content='如果没有开票数据，可以稍后进行维护。'  position="BottomCenter">
                  <ejs-checkbox label="是否开票" formControlName="IsOpenInvoice" style="margin-top:25px" (checkedChange)="IsOpenInvoiceChange($event)"></ejs-checkbox>
                </ejs-tooltip>


              </div>
            </div>
          </div>
          <div fxFlex="1 6 calc(5em + 10px)" style="margin:0 0 0 20px">
            <div class="margin_t_10">折扣代码：<ejs-textbox  formControlName="ConpunCode"></ejs-textbox></div>
            <div class="margin_t_10">回单类型：
              <app-bin-cargoreceiptpapershowtype formControlName="CargoReceiptPaperShowType"></app-bin-cargoreceiptpapershowtype>
              <ejs-checkbox label="是否回单" formControlName="Needreturntrackingno"></ejs-checkbox>
            </div>
            <div class="margin_t_10">付款方式：<app-bin-customerpaymethod formControlName="PaymentMethod"></app-bin-customerpaymethod></div>
            <div class="margin_t_10"><button ejs-button cssClass="e-info" type="button" disabled="disabled">计算总费用</button></div>
          </div>
          <div fxFlex="1 6 calc(15em + 20px)" style="margin:0 0 0 10px background:#666"></div>
        </div>
      </mat-card-content>
    </mat-card>
    <mat-card class="cardmargin">
      <mat-card-title class="cardborder">
        <mat-icon fontSet="fontawesome" fontIcon="fa-coins" style="color:#333;font-size:18px;width:22px"></mat-icon>
        <b class="mat_tit_b">运费收入总计</b>
      </mat-card-title>
      <mat-card-content>
        <div fxLayout="row" fxLayoutAlign="space-around end" class="margin_t_10">
          <div fxFlex="1 6">提货费：<ejs-numerictextbox step='1' formControlName="TihuoFee" ></ejs-numerictextbox></div>
          <div fxFlex="1 6" class="margin_015">运费：<ejs-numerictextbox step='1' formControlName="BaseTransportFee" ></ejs-numerictextbox></div>
          <div fxFlex="1 6">送货费：<ejs-numerictextbox step='1' formControlName="SonhuoFee" ></ejs-numerictextbox></div>
          <div fxFlex="1 6" class="margin_015">增值服务费：<ejs-numerictextbox step='1' formControlName="AddValueFee"  disabled="disabled"></ejs-numerictextbox></div>
          <div fxFlex="1 6">额外费用合计： <ejs-numerictextbox step='1' formControlName="ExtendOtherFee"  disabled="disabled"></ejs-numerictextbox></div>
        </div>
        <div fxLayout="row" fxLayoutAlign="space-around end" class="margin_t_10">
          <div fxFlex="1 6">运费合计：<ejs-numerictextbox disabled="true" value="{{displyatotalfee}}"></ejs-numerictextbox></div>
          <div fxFlex="1 6" style="margin-left:15px">实收合计(折扣优惠)：<ejs-numerictextbox step='0' formControlName="RealInputLogisticFee" disabled="disabled"></ejs-numerictextbox></div>
        </div>
        <div fxLayout="row" fxLayoutAlign="center center" style="margin-top:20px">
        </div>
      </mat-card-content>
    </mat-card>
  </form>
  <div class="pagebtnbox">
    <button [disabled]="issave" ejs-button cssClass="e-info pagebtn" type="button" (click)="SaveOrder()" class="mat-green"><i class="fas fa-save"></i>
    保存</button>
    <button ejs-button cssClass="e-info pagebtn" type="button" (click)="ResetForm()" class="mat-reject"><i class="fas fa-undo-alt"></i>
      重置表单</button>
    <a  ejs-button cssClass="e-info pagebtn"  class="mat-blue"  (click)="openorderAnalysis('50em','50em')"><i class="fas fa-clipboard-list"></i> 报价参考</a>
    <a  ejs-button cssClass="e-info pagebtn"  class="mat-cancel"  [routerLink]="['/biz/myorder/list']" ><i class="fas fa-angle-double-left"></i>返回</a>
    <!--    <button ejs-button cssClass="e-info pagebtn" type="button" (click)="SaveOrder()" ><i class="fas fa-share"></i>保存&下达</button>-->
  </div>

</div>
